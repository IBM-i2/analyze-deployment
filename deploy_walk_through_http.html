<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Deploying the distributed deployment example with IBM HTTP Server </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Deploying the distributed deployment example with IBM HTTP Server ">
    <meta name="generator" content="docfx 2.56.2.0">
    
    <link rel="shortcut icon" href="images/favicon.png">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="guidetoc/toc.html">
    
    <meta property="docfx:rel" content="">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <strong>i2 Analyze</strong>
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
          
          <div class="subnav navbar navbar-default">
            <div class="container hide-when-search" id="breadcrumb">
              <ul class="breadcrumb">
                <li></li>
              </ul>
            </div>
          </div>
            <article class="content wrap" id="_content" data-uid="">
<h1 id="deploying-the-distributed-deployment-example-with-ibm-http-server">Deploying the distributed deployment example with IBM HTTP Server</h1>

<p>To deploy the distributed deployment example in a topology that uses the IBM HTTP Server. The following instructions detail what is required on each container, and how to use these steps to deploy i2 Analyze on physical servers.</p>
<h2 id="before-you-begin">Before you begin</h2>
<ul>
<li>Complete the <a href="deploy_quick_start.html">Quick deploy</a> section and your deployment must be running.</li>
<li>If you deployed the example with one of the configurations in the <code>configuration_mods</code> directory or changed the <code>topology.xml</code> file, reset your example deployment to the base configuration before you deploy with IBM HTTP Server. To reset your environment, run the following command from the <code>src/scripts</code> directory:</li>
</ul>
<pre><code class="lang-sh">./resetEnvironment
</code></pre><p>You must run all Docker commands from a command line where Docker is initialized.</p>
<h2 id="prerequisites-for-deploying-i2-analyze-with-ibm-http-server">Prerequisites for Deploying i2 Analyze with IBM HTTP Server</h2>
<p>Obtain the IBM HTTP Server archive for Linux in the usual manner.</p>
<p>You download the archive using the following version: <code>9.0.5-WS-IHS-ARCHIVE-linux-x86_64-FP001</code>.</p>
<p>Rename the <code>.zip</code> file to <code>IHS_ARCHIVE_FILE.zip</code>, then copy it to the <code>src/images/common/ihs_base</code> directory.</p>
<h2 id="deploying-i2-analyze-with-ibm-http-server">Deploying i2 Analyze with IBM HTTP Server</h2>
<p>In the distributed deployment example, the IBM HTTP Server is deployed in its own server.</p>
<p>In the Docker environment, if <code>src/images/common/ihs_base/IHS_ARCHIVE_FILE.zip</code> exists, the ihs_image is created when you run the buildImages.</p>
<p>The IBM HTTP Server container is started when you run the <code>runContainers</code> script. If you cleaned your environment, rebuild and run the container.
To build the IBM HTTP Server image, run the following command from the <code>src/images</code> folder:</p>
<pre><code class="lang-sh">docker build -t base_ihs_image common/ihs_base --build-arg IHS_ARCHIVE_FILE=IHS_ARCHIVE_FILE.zip
docker build -t ihs_image common/ihs
</code></pre><p>The IBM HTTP Server image is created with the name <code>ihs_image</code>.</p>
<p>To run the IBM HTTP Server container, run the following command:</p>
<pre><code class="lang-sh">docker run -d --name ihs -h ihs -p 80:80 -p 443:443 --net eianet -u root ihs_image
</code></pre><h3 id="modifying-the-configuration">Modifying the configuration</h3>
<p>The current configuration is set up for a deployment that does not use the HTTP Server. You must update the configuration on each of the containers. To update the configurations, run the <code>updateServerConfigurations</code> script from the <code>scripts</code> directory:</p>
<pre><code class="lang-sh">./updateServerConfigurations ihs
</code></pre><p>The configuration is now on each container.</p>
<p>In a non-Docker environment, modify each configuration to match the configuration in the <code>src/configuration_mods/&lt;database management system&gt;/ihs</code> directory.</p>
<h3 id="redeploying-and-starting-the-components-of-i2-analyze">Redeploying and starting the components of i2 Analyze</h3>
<p>After the configuration is present on each server, you must redeploy and start each component of i2 Analyze.</p>
<p>You must redeploy and start the components of a deployment in the order that they are described here.</p>
<h4 id="stopping-the-http-server">Stopping the HTTP Server</h4>
<p>To stop the HTTP Server, run the following command on the <code>ihs</code> container:</p>
<pre><code class="lang-sh">docker exec -u root ihs bash -c &quot;/opt/IBM/HTTPServer/bin/apachectl stop&quot;
</code></pre><h4 id="stopping-liberty">Stopping Liberty</h4>
<p>To stop Liberty, run the following command on the <code>liberty</code> container:</p>
<pre><code class="lang-sh">docker exec -u i2analyze liberty /opt/i2/i2analyze/toolkit/scripts/setup -t stopLiberty
</code></pre><p>The console output from the <code>stopLiberty</code> task is output directly to the console.</p>
<h4 id="deploying-liberty">Deploying Liberty</h4>
<p>To deploy Liberty, run following command on the <code>liberty</code> container:</p>
<pre><code class="lang-sh">docker exec -u i2analyze liberty /opt/i2/i2analyze/toolkit/scripts/setup -t deployLiberty
</code></pre><h4 id="configuring-the-http-server">Configuring the HTTP Server</h4>
<p>To configure the IBM HTTP Server, run the following command on the <code>ihs</code> container:</p>
<pre><code class="lang-sh">docker exec -u root ihs /opt/i2/i2analyze/toolkit/scripts/setup -t configureHttpServer
</code></pre><p>To configure the IBM HTTP Server plugin configuration, copy the configured file to the <code>ihs</code> container. To copy the plugin file, run the following command on the <code>ihs</code> container:</p>
<pre><code class="lang-sh">docker exec -u root ihs bash -c &quot;cp /opt/i2/i2analyze/toolkit/configuration/plugin-cfg.xml /opt/IBM/HTTPServer/plugins/iap/config/plugin-cfg.xml&quot;
</code></pre><h4 id="starting-liberty">Starting Liberty</h4>
<p>To start Liberty, run the following command on the <code>liberty</code> container:</p>
<pre><code class="lang-sh">docker exec -u i2analyze liberty /opt/i2/i2analyze/toolkit/scripts/setup -t startLiberty
</code></pre><p>The console output from the <code>startLiberty</code> task is output directly to the console.</p>
<h4 id="starting-the-http-server">Starting the HTTP Server</h4>
<p>To start the HTTP Server, run the following command on the <code>ihs</code> container:</p>
<pre><code class="lang-sh">docker exec -u root ihs bash -c &quot;/opt/IBM/HTTPServer/bin/apachectl start&quot;
</code></pre><h2 id="results">Results</h2>
<p>All of the components of i2 Analyze are installed, including IBM HTTP Server and the application is started.</p>
<hr>
<h2 id="testing-the-deployment">Testing the deployment</h2>
<p>To test the deployment was installed successfully with IBM HTTP Server, connect to i2 Analyze from Analyst&#39;s Notebook Premium. The URL that you use to connect is: <a href="http://i2demo/opal">http://i2demo/opal</a>.</p>
<p>Log in using the user name <code>Jenny</code> with the password <code>Jenny</code>.</p>
<p>You can use the <strong>Upload records</strong> functionality to add data to the Information Store, and then search for that data or data that already existed.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            &copy; N. Harris Computer Corporation (2022)
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
